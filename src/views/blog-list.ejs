<!-- === BEGIN HEADER === -->
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<head>
	<!-- Title -->
	<title>Substance - Professional Bootstrap Template</title>
	<!-- Meta -->
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
	<!-- Favicon -->
	<link href="/favicon.html" rel="shortcut icon">
	<!-- Bootstrap Core CSS -->
	<link rel="stylesheet" href="/css/bootstrap.css" rel="stylesheet">
	<!-- Template CSS -->
	<link rel="stylesheet" href="/css/animate.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/font-awesome.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/nexus.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/responsive.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/custom.css" rel="stylesheet">
	<!-- Google Fonts-->
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Lato:400,300" rel="stylesheet" type="text/css">
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" rel="stylesheet" type="text/css">
</head>
<body>
	<div id="pre_header" class="visible-lg"></div>
	<div id="header" class="container">
		<div class="row">
			<!-- Logo -->
			<div class="logo">
				<br href="index.ejs" title="">
					<img class="logo-img" src="/img/logo2.jpg" alt="Logo" /></br>
					<p class="logo-title">Stereo Heart</p>
				</a>
			</div>
			<!-- End Logo -->
			<!-- Top Menu -->
			<div class="col-md-12 margin-top-30">
				<div id="hornav" class="pull-right visible-lg">
					<ul class="nav navbar-nav">
						<li><a href="/index">Home</a></li>
						<li><a href="/search">Search</a></li>
						<li><a href="/blog-list">Blog</a></li>
						<li>
							<% if (user) { %> 
								<span>Hello <strong><%= user.username %></strong> <span class="triangle-down"></span></span>  <!-- Hiển thị tên người dùng nếu đã đăng nhập -->
								<ul>
									<li><a href="/login">Log Out</a></li>  <!-- Link đăng xuất -->
								</ul>
							<% } else { %> 
								<span>Manage Account</span>  <!-- Giữ nguyên nếu chưa đăng nhập -->
								<ul>
									<li><a href="/login">Log In</a></li>
								</ul>
							<% } %>
						</li>
					</ul>				</div>
				</div>
				<div class="clear"></div>
				<!-- End Top Menu -->
			</div>
		</div>
		<!-- === END HEADER === -->
		<!-- === BEGIN CONTENT === -->
		<div id="content" class="container">
			<div class="row margin-vert-30" style="margin-bottom: 0;">
				<div class="col-md-12">
					<!-- Filter Buttons -->
					<div class="portfolio-filter-container margin-top-20">
						<ul class="portfolio-filter">
							<li class="portfolio-filter-label label label-primary">
								filter by:
							</li>
							<li>
								<a href="#"
								   class="btn btn-default <%= isNewest ? 'active' : '' %>"
								   data-sort="latest">Latest</a>
							</li>
							<li>
								<a href="#"
								   class="btn btn-default <%= !isNewest ? 'active' : '' %>"
								   data-sort="oldest">Oldest</a>
							</li>																										
							
							<!-- <li>
								<a href="#" class="portfolio-selected btn btn-default" data-filter="*">All</a>
							</li>
							<li>
								<a href="#" class="btn btn-default" data-filter=".code">Coding</a>
							</li> -->
						</ul>
					</div>
					<!-- End Filter Buttons -->
				</div>
			</div>
			<div class="row margin-vert-30" style="margin-top: 0;">
				<!-- Main Column -->
				<div class="col-md-9">
					<!-- Blog Post -->
					<% blogs.forEach(blog => { %>
						<!-- Blog Post -->
						<div class="blog-post padding-bottom-20">
							<!-- Blog Item Header -->
							<div class="blog-item-header">
								<div class="blog-post-date pull-left">
									<span class="day"><%= new Date(blog.created_date).getDate() %></span>
									<span class="month"><%= new Date(blog.created_date).toLocaleString('en-US', { month: 'short' }) %></span>
								</div>
								<div class="blog-post-year pull-left">
									<span class="year"><%= new Date(blog.created_date).getFullYear() %></span>
								</div>
								<h2 class="blog-title ms-3">
									<a href="/blog-single?id=<%= blog.id %>">
										<%= blog.title %>
									</a>
								</h2>
							</div>
							<!-- End Blog Item Header -->
						
							<!-- Blog Item Details -->
							<div class="blog-post-details">
								<!-- Author Name -->
								<div class="blog-post-details-item blog-post-details-item-left user-icon">
									<i class="fa fa-user"></i>
									<a href="#"><%= blog.authorData.username %> </a>
								</div>
								<!-- Last Modified Date -->
								<div class="blog-post-details-item blog-post-details-item-left blog-post-details-tags tags-icon">
									<a>Last Modified Date: <%= blog.last_modified_date.toLocaleDateString() %></a>
								</div>
							</div>
							<!-- End Blog Item Details -->
						
							<!-- Blog Item Body -->
							<div class="blog">
								<div class="clearfix"></div>
								<div class="blog-post-body row margin-top-15">
									<div class="col-md-5">
										<img class="pull-left" src="<%= blog.imageUrl ? blog.imageUrl : '/img/blog/image1.jpg' %>" alt="thumb1">
									</div>
									<div class="col-md-7">
										<p><%= blog.description %></p>
										<!-- Read More -->
										<a href="/blog-single?id=<%= blog.id %>" class="btn btn-primary">
											Read More <i class="icon-chevron-right readmore-icon"></i>
										</a>
										<!-- End Read More -->
									</div>
								</div>
							</div>
							<!-- End Blog Item Body -->
							<!-- End Blog Item -->						
						</div>
					<% }) %>
						
					<!-- End Blog Item -->
				</div>
				<!-- End Main Column -->
				<!-- Side Column -->
				<div class="col-md-3">
					<!-- Recent Posts -->
					<div class="recent-posts">
						<h3>Recent Posts</h3>
						<ul class="posts-list margin-top-10">
							<% recentPosts.forEach(function(post) { %>
							  	<li>
									<div class="recent-post d-flex align-items-center">
										<img src="<%= post.imageUrl ? post.imageUrl : '/img/blog/thumbs/thumb1.jpg' %>" alt="thumb" class="post-thumb me-3">
										<div class="post-text">
											<a href="/blog-single?id=<%= post.id %>" class="posts-list-title">
												<%= post.title || 'No Title' %>
											</a><br>
											<span class="recent-post-date">
												<%= post.createdAt.toDateString() %>
											</span>
										</div>
									</div>
							  	</li>
							<% }) %>
						</ul>						  
					</div>					  
					<!-- End Recent Post  -->
					<!-- End Side Column -->
				</div>
				<!-- === END CONTENT === -->
			</div>
		</div>
		<!-- === BEGIN FOOTER === -->
		<div id="base">
			<div class="container padding-vert-30">
				<div class="row">
					<!-- Thumbs Gallery -->
					<div class="col-md-3 margin-bottom-20">
						<h3 class="margin-bottom-10">Portfolio Highlights</h3>
						<div class="thumbs-gallery">
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image1.jpg">
								<img src="/img/thumbsgallery/thumbs/image1.jpg" alt="image1.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image2.jpg">
								<img src="/img/thumbsgallery/thumbs/image2.jpg" alt="image2.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image3.jpg">
								<img src="/img/thumbsgallery/thumbs/image3.jpg" alt="image3.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image4.jpg">
								<img src="/img/thumbsgallery/thumbs/image4.jpg" alt="image4.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image6.jpg">
								<img src="/img/thumbsgallery/thumbs/image6.jpg" alt="image6.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image7.jpg">
								<img src="/img/thumbsgallery/thumbs/image7.jpg" alt="image7.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image8.jpg">
								<img src="/img/thumbsgallery/thumbs/image8.jpg" alt="image8.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image9.jpg">
								<img src="/img/thumbsgallery/thumbs/image9.jpg" alt="image9.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image92.jpg">
								<img src="/img/thumbsgallery/thumbs/image92.jpg" alt="image92.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image94.jpg">
								<img src="/img/thumbsgallery/thumbs/image94.jpg" alt="image94.jpg">
							<i></i></a>
							
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image95.jpg">
								<img src="/img/thumbsgallery/thumbs/image95.jpg" alt="image95.jpg">
							<i></i></a>
							
							<a class="thumbBox" rel="lightbox-thumbs" href="/img/thumbsgallery/image96.jpg">
								<img src="/img/thumbsgallery/thumbs/image96.jpg" alt="image96.jpg">
							<i></i></a>
							
							</div>			<div class="clearfix"></div>
						</div>
						<!-- End Thumbs Gallery -->
						<!-- Contact Details -->
						<div class="col-md-3 margin-bottom-20">
							<h3 class="margin-bottom-10">Contact Details</h3>
							<p>University of Science,<br />
								Ho Chi Minh,<br />
								VietNam</p>
							<p>Email: <a href="mailto:info@website.com">info@website.com</a><br />
							Website: <a href="http://www.website.com/">www.website.com</a></p>
						</div>
						<!-- End Contact Details -->
						<!-- Sample Menu -->
						<div class="col-md-3 margin-bottom-20" >
							<h3 class="margin-bottom-10">Web development team members</h3>
							<ul class="menu">	
								<li>
									<p style="margin-bottom: 0;">DO HANH THAO - 22120338</p>
								</li>
								<li>
									<p>NGUYEN MINH THIEN - 22120341</p>
								</li>
							</ul>
							<div class="clearfix"></div>
							
						</div>
						<!-- End Sample Menu -->
						<!-- Disclaimer -->
						<div class="col-md-3 margin-bottom-20">
							<h3 class="margin-bottom-10">Disclaimer</h3>
							<p>The articles in this blog are only to share personal experiences about the types of TWS on the market, 
								we do not accept advertising for the products in the article.</p>
							<p>We use web template and images from the internet.</p>
							<div class="clearfix"></div>
						</div>
						<!-- End Disclaimer -->
						<div class="clearfix"></div>
					</div>
				</div>
			</div>

			<!-- AddButton -->
			<!-- <a href="/add-blog" title="Add Blog">
				<button class="floating-btn">+</button>
			</a> -->
			<!-- Hiển thị nút Add Blog nếu user là admin -->
			<% if (user && user.role === 'Admin') { %>
				<a href="/add-blog" title="Add Blog">
					<button class="floating-btn">+</button>
				</a>
			<% } %>			

			<!-- Footer Menu -->
			<div id="footer">
				<div class="container">
					<div class="row">
						<div id="copyright" class="col-md-4">
							<p>(c) 2025 Copyright Info</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- End Footer Menu -->
		<!-- JS -->
		<script type="text/javascript" src="/js/jquery.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="/js/bootstrap.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="/js/scripts.js"></script>
		<!-- Isotope - Portfolio Sorting -->
		<script type="text/javascript" src="/js/jquery.isotope.js" type="text/javascript"></script>
		<!-- Mobile Menu - Slicknav -->
		<script type="text/javascript" src="/js/jquery.slicknav.js" type="text/javascript"></script>
		<!-- Animate on Scroll-->
		<script type="text/javascript" src="/js/jquery.visible.js" charset="utf-8"></script>
		<!-- Slimbox2-->
		<script type="text/javascript" src="/js/slimbox2.js" charset="utf-8"></script>
		<!-- Modernizr -->
		<script src="/js/modernizr.custom.js" type="text/javascript"></script>
		<!-- End JS -->
	</body>
</html>
<!-- === END FOOTER === -->

<script>
	document.querySelectorAll('a[data-sort]').forEach(item => {
		item.addEventListener('click', function (e) {
			e.preventDefault();

			const sortType = this.getAttribute('data-sort');
			const isNewest = sortType === 'latest' ? 'true' : 'false';

			// Gửi request tới server với query isNewest
			window.location.href = `/blog-list?isNewest=${isNewest}`;
		});
	});
</script>